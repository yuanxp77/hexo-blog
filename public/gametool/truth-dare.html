<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çœŸå¿ƒè¯å¤§å†’é™©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 15px;
            overflow-x: hidden;
        }

        .container {
            max-width: 500px;
            width: 100%;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding-top: 10px;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 15px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .mode-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mode-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid white;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .mode-btn.active {
            background: white;
            color: #667eea;
        }

        .mode-btn:active {
            transform: scale(0.98);
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .card-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .card-content {
            font-size: 1.3rem;
            line-height: 1.8;
            color: #333;
            margin-bottom: 15px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-content.loading {
            color: #999;
            font-size: 1rem;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 10px;
        }

        .difficulty-easy {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-medium {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-hard {
            background: #f8d7da;
            color: #721c24;
        }

        .btn-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .draw-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .draw-btn:active {
            transform: scale(0.98);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .draw-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .source-switch {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 0.9rem;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.3);
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #4CAF50;
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
            color: white;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-top: 3px;
        }

        @media (max-width: 400px) {
            .card {
                padding: 30px 20px;
                min-height: 220px;
            }

            .card-content {
                font-size: 1.1rem;
            }

            .draw-btn {
                padding: 15px;
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">â† è¿”å›</a>
    
    <div class="container">
        <div class="header">
            <h1>ğŸ’¬ çœŸå¿ƒè¯å¤§å†’é™©</h1>
            <p>å‡†å¤‡å¥½æ¥å—æŒ‘æˆ˜äº†å—ï¼Ÿ</p>
        </div>

        <div class="mode-selector">
            <button class="mode-btn active" data-mode="truth" id="truthBtn">
                çœŸå¿ƒè¯ ğŸ˜Š
            </button>
            <button class="mode-btn" data-mode="dare" id="dareBtn">
                å¤§å†’é™© ğŸ˜ˆ
            </button>
        </div>

        <div class="card">
            <div class="card-icon" id="cardIcon">ğŸ’­</div>
            <div class="card-content" id="cardContent">
                ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æŠ½å–
            </div>
            <div id="difficultyBadge"></div>
        </div>

        <div class="btn-container">
            <div class="source-switch">
                <span>æœ¬åœ°é¢˜åº“</span>
                <label class="switch">
                    <input type="checkbox" id="sourceToggle">
                    <span class="slider"></span>
                </label>
                <span>åœ¨çº¿é¢˜åº“</span>
            </div>

            <button class="draw-btn" id="drawBtn">
                ğŸ² å¼€å§‹æŠ½å–
            </button>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="truthCount">0</div>
                <div class="stat-label">çœŸå¿ƒè¯</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="dareCount">0</div>
                <div class="stat-label">å¤§å†’é™©</div>
            </div>
        </div>
    </div>

    <script>
        let currentMode = 'truth';
        let useOnlineSource = false;
        let stats = { truth: 0, dare: 0 };

        // æœ¬åœ°é¢˜åº“
        const localQuestions = {
            truth: [
                { text: "ä½ æœ€æƒ³å¿˜è®°çš„ä¸€ä»¶å°´å°¬äº‹æ˜¯ä»€ä¹ˆï¼Ÿ", difficulty: "easy" },
                { text: "ä½ æš—æ‹è¿‡åœ¨åœºçš„æŸä¸ªäººå—ï¼Ÿ", difficulty: "medium" },
                { text: "ä½ åšè¿‡æœ€åæ‚”çš„ä¸€ä»¶äº‹æ˜¯ä»€ä¹ˆï¼Ÿ", difficulty: "hard" },
                { text: "å¦‚æœå¯ä»¥ç©¿è¶Šï¼Œä½ æœ€æƒ³å›åˆ°å“ªä¸€å¤©ï¼Ÿ", difficulty: "easy" },
                { text: "ä½ æœ€ç¾¡æ…•åœ¨åœºçš„å“ªä¸€ä¸ªäººï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ", difficulty: "medium" },
                { text: "ä½ æœ‰ä»€ä¹ˆä¸ä¸ºäººçŸ¥çš„ç‰¹æ®Šç™–å¥½ï¼Ÿ", difficulty: "hard" },
                { text: "ä½ çš„åˆæ‹æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿ", difficulty: "easy" },
                { text: "ä½ åšè¿‡æœ€ä¸¢è„¸çš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ", difficulty: "medium" },
                { text: "å¦‚æœä¸–ç•Œæœ«æ—¥ï¼Œä½ æœ€æƒ³å’Œè°åœ¨ä¸€èµ·ï¼Ÿ", difficulty: "medium" },
                { text: "ä½ æœ€ä¸æƒ³è®©çˆ¶æ¯çŸ¥é“çš„ç§˜å¯†æ˜¯ä»€ä¹ˆï¼Ÿ", difficulty: "hard" },
                { text: "ä½ æœ‰å·å·å–œæ¬¢è¿‡æœ‹å‹çš„å¯¹è±¡å—ï¼Ÿ", difficulty: "hard" },
                { text: "ä½ æœ€æƒ³æ”¹å˜è‡ªå·±çš„å“ªä¸€ç‚¹ï¼Ÿ", difficulty: "easy" },
                { text: "ä½ æ›¾ç»æ’’è¿‡æœ€å¤§çš„è°æ˜¯ä»€ä¹ˆï¼Ÿ", difficulty: "medium" },
                { text: "ä½ æ‰‹æœºé‡Œæœ€ä¸æƒ³è¢«åˆ«äººçœ‹åˆ°çš„æ˜¯ä»€ä¹ˆï¼Ÿ", difficulty: "hard" },
                { text: "ä½ åšè¿‡æœ€ç–¯ç‹‚çš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ", difficulty: "medium" }
            ],
            dare: [
                { text: "å”±ä¸€é¦–æ­Œç»™å¤§å®¶å¬", difficulty: "easy" },
                { text: "ç»™é€šè®¯å½•é‡Œç¬¬äº”ä¸ªäººå‘é€"æˆ‘å–œæ¬¢ä½ "", difficulty: "hard" },
                { text: "åš20ä¸ªä¿¯å§æ’‘", difficulty: "medium" },
                { text: "æ¨¡ä»¿åœ¨åœºä»»æ„ä¸€ä¸ªäººçš„åŠ¨ä½œæˆ–è¯´è¯æ–¹å¼", difficulty: "easy" },
                { text: "è®©åœ¨åœºçš„äººéšæ„æ‘†å¼„ä½ çš„å‘å‹", difficulty: "medium" },
                { text: "ç»™æš—æ‹çš„äººæ‰“ä¸€ä¸ªç”µè¯ï¼ˆä¸èƒ½è¯´æ˜åŸå› ï¼‰", difficulty: "hard" },
                { text: "ç”¨æœ€æç¬‘çš„è¡¨æƒ…æ‹ä¸€å¼ ç…§ç‰‡å‘æœ‹å‹åœˆ", difficulty: "medium" },
                { text: "åƒä¸€å£è¾£æ¤’ï¼ˆæˆ–å…¶ä»–é£Ÿç‰©ç»„åˆï¼‰", difficulty: "medium" },
                { text: "å³å…´è¡¨æ¼”ä¸€æ®µèˆè¹ˆ", difficulty: "medium" },
                { text: "è¯´å‡ºåœ¨åœºæ‰€æœ‰äººçš„ä¸‰ä¸ªä¼˜ç‚¹", difficulty: "easy" },
                { text: "ç»™å¼‚æ€§ä¸€ä¸ªæ‹¥æŠ±", difficulty: "medium" },
                { text: "å­¦ç‹—å«ä¸‰å£°", difficulty: "easy" },
                { text: "åœ¨æœ‹å‹åœˆå‘è¡¨å¯¹æŸäººçš„è¡¨ç™½ï¼ˆå¯ä»¥æ˜¯ç©ç¬‘ï¼‰", difficulty: "hard" },
                { text: "åŸåœ°è½¬10åœˆå†èµ°ç›´çº¿", difficulty: "easy" },
                { text: "å¯¹ç€çª—å¤–å¤§å–Š"æˆ‘æ˜¯æœ€æ£’çš„"ä¸‰é", difficulty: "medium" }
            ]
        };

        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            
            const icon = mode === 'truth' ? 'ğŸ’­' : 'ğŸ¯';
            document.getElementById('cardIcon').textContent = icon;
            document.getElementById('cardContent').textContent = 'ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æŠ½å–';
            document.getElementById('difficultyBadge').innerHTML = '';
        }

        function toggleSource() {
            useOnlineSource = document.getElementById('sourceToggle').checked;
        }

        async function drawQuestion() {
            const btn = document.getElementById('drawBtn');
            const content = document.getElementById('cardContent');
            const badge = document.getElementById('difficultyBadge');
            
            btn.disabled = true;
            content.classList.add('loading');
            content.textContent = 'æŠ½å–ä¸­...';
            badge.innerHTML = '';

            try {
                let question;
                
                if (useOnlineSource) {
                    question = await fetchOnlineQuestion();
                } else {
                    question = getLocalQuestion();
                }

                // åŠ¨ç”»æ•ˆæœ
                setTimeout(() => {
                    content.classList.remove('loading');
                    content.textContent = question.text;
                    
                    const difficultyClass = `difficulty-${question.difficulty}`;
                    const difficultyText = {
                        'easy': 'ç®€å•',
                        'medium': 'ä¸­ç­‰',
                        'hard': 'å›°éš¾'
                    };
                    badge.innerHTML = `<span class="difficulty-badge ${difficultyClass}">${difficultyText[question.difficulty]}</span>`;
                    
                    // æ›´æ–°ç»Ÿè®¡
                    stats[currentMode]++;
                    document.getElementById(currentMode + 'Count').textContent = stats[currentMode];
                    
                    btn.disabled = false;
                }, 500);
            } catch (error) {
                content.classList.remove('loading');
                content.textContent = 'è·å–å¤±è´¥ï¼Œè¯·é‡è¯•æˆ–åˆ‡æ¢åˆ°æœ¬åœ°é¢˜åº“';
                btn.disabled = false;
            }
        }

        function getLocalQuestion() {
            const questions = localQuestions[currentMode];
            const randomIndex = Math.floor(Math.random() * questions.length);
            return questions[randomIndex];
        }

        async function fetchOnlineQuestion() {
            try {
                const response = await fetch('https://v1.hitokoto.cn/?c=i');
                const data = await response.json();
                
                if (data && data.hitokoto) {
                    return {
                        text: data.hitokoto,
                        difficulty: ['easy', 'medium', 'hard'][Math.floor(Math.random() * 3)]
                    };
                } else {
                    throw new Error('APIè¿”å›æ•°æ®æ ¼å¼é”™è¯¯');
                }
            } catch (error) {
                console.error('åœ¨çº¿è·å–å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°é¢˜åº“:', error);
                return getLocalQuestion();
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåç»‘å®šäº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            // ç»‘å®šæŠ½å–æŒ‰é’®
            document.getElementById('drawBtn').addEventListener('click', drawQuestion);
            
            // ç»‘å®šæ¨¡å¼åˆ‡æ¢æŒ‰é’®
            document.getElementById('truthBtn').addEventListener('click', () => switchMode('truth'));
            document.getElementById('dareBtn').addEventListener('click', () => switchMode('dare'));
            
            // ç»‘å®šå¼€å…³
            document.getElementById('sourceToggle').addEventListener('change', toggleSource);
            
            // æ·»åŠ é”®ç›˜äº‹ä»¶æ”¯æŒ
            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space' && !document.getElementById('drawBtn').disabled) {
                    e.preventDefault();
                    drawQuestion();
                }
            });
        });
    </script>
</body>
</html>
